DROP TABLE IF EXISTS `call`;

CREATE TABLE `call` (
--  `id` int(11) unsigned NOT NULL auto_increment,
  `file_id` int(11) unsigned NOT NULL,
  `caller` varchar(18) default NULL,
  `peer` varchar(18) default NULL,
  `calltime` datetime default NULL,
  `duration` mediumint(6) unsigned default NULL,
  `trunk_in` smallint(5) unsigned default NULL,
  `trunk_out` smallint(5) unsigned default NULL,

  INDEX caller_idx	(caller(6)),
  INDEX peer_idx	(peer(6)),
  INDEX calltime_idx	(calltime)
--  FOREIGN KEY (file_id) REFERENCES file(id)
--	ON DELETE CASCADE
--	ON UPDATE CASCADE
) 
-- ENGINE=INNODB
PARTITION BY RANGE(TO_DAYS(`calltime`))
(
PARTITION P200101 VALUES LESS THAN (TO_DAYS('2001-02-01')),
PARTITION P200102 VALUES LESS THAN (TO_DAYS('2001-03-01')),
PARTITION P200103 VALUES LESS THAN (TO_DAYS('2001-04-01')),
PARTITION P200104 VALUES LESS THAN (TO_DAYS('2001-05-01')),
PARTITION P200105 VALUES LESS THAN (TO_DAYS('2001-06-01')),
PARTITION P200106 VALUES LESS THAN (TO_DAYS('2001-07-01')),
PARTITION P200107 VALUES LESS THAN (TO_DAYS('2001-08-01')),
PARTITION P200108 VALUES LESS THAN (TO_DAYS('2001-09-01')),
PARTITION P200109 VALUES LESS THAN (TO_DAYS('2001-10-01')),
PARTITION P200110 VALUES LESS THAN (TO_DAYS('2001-11-01')),
PARTITION P200111 VALUES LESS THAN (TO_DAYS('2001-12-01')),
PARTITION P200112 VALUES LESS THAN (TO_DAYS('2002-01-01')),

PARTITION P200201 VALUES LESS THAN (TO_DAYS('2002-02-01')),
PARTITION P200202 VALUES LESS THAN (TO_DAYS('2002-03-01')),
PARTITION P200203 VALUES LESS THAN (TO_DAYS('2002-04-01')),
PARTITION P200204 VALUES LESS THAN (TO_DAYS('2002-05-01')),
PARTITION P200205 VALUES LESS THAN (TO_DAYS('2002-06-01')),
PARTITION P200206 VALUES LESS THAN (TO_DAYS('2002-07-01')),
PARTITION P200207 VALUES LESS THAN (TO_DAYS('2002-08-01')),
PARTITION P200208 VALUES LESS THAN (TO_DAYS('2002-09-01')),
PARTITION P200209 VALUES LESS THAN (TO_DAYS('2002-10-01')),
PARTITION P200210 VALUES LESS THAN (TO_DAYS('2002-11-01')),
PARTITION P200211 VALUES LESS THAN (TO_DAYS('2002-12-01')),
PARTITION P200212 VALUES LESS THAN (TO_DAYS('2003-01-01')),

PARTITION P200301 VALUES LESS THAN (TO_DAYS('2003-02-01')),
PARTITION P200302 VALUES LESS THAN (TO_DAYS('2003-03-01')),
PARTITION P200303 VALUES LESS THAN (TO_DAYS('2003-04-01')),
PARTITION P200304 VALUES LESS THAN (TO_DAYS('2003-05-01')),
PARTITION P200305 VALUES LESS THAN (TO_DAYS('2003-06-01')),
PARTITION P200306 VALUES LESS THAN (TO_DAYS('2003-07-01')),
PARTITION P200307 VALUES LESS THAN (TO_DAYS('2003-08-01')),
PARTITION P200308 VALUES LESS THAN (TO_DAYS('2003-09-01')),
PARTITION P200309 VALUES LESS THAN (TO_DAYS('2003-10-01')),
PARTITION P200310 VALUES LESS THAN (TO_DAYS('2003-11-01')),
PARTITION P200311 VALUES LESS THAN (TO_DAYS('2003-12-01')),
PARTITION P200312 VALUES LESS THAN (TO_DAYS('2004-01-01')),

PARTITION P200401 VALUES LESS THAN (TO_DAYS('2004-02-01')),
PARTITION P200402 VALUES LESS THAN (TO_DAYS('2004-03-01')),
PARTITION P200403 VALUES LESS THAN (TO_DAYS('2004-04-01')),
PARTITION P200404 VALUES LESS THAN (TO_DAYS('2004-05-01')),
PARTITION P200405 VALUES LESS THAN (TO_DAYS('2004-06-01')),
PARTITION P200406 VALUES LESS THAN (TO_DAYS('2004-07-01')),
PARTITION P200407 VALUES LESS THAN (TO_DAYS('2004-08-01')),
PARTITION P200408 VALUES LESS THAN (TO_DAYS('2004-09-01')),
PARTITION P200409 VALUES LESS THAN (TO_DAYS('2004-10-01')),
PARTITION P200410 VALUES LESS THAN (TO_DAYS('2004-11-01')),
PARTITION P200411 VALUES LESS THAN (TO_DAYS('2004-12-01')),
PARTITION P200412 VALUES LESS THAN (TO_DAYS('2005-01-01')),

PARTITION P200501 VALUES LESS THAN (TO_DAYS('2005-02-01')),
PARTITION P200502 VALUES LESS THAN (TO_DAYS('2005-03-01')),
PARTITION P200503 VALUES LESS THAN (TO_DAYS('2005-04-01')),
PARTITION P200504 VALUES LESS THAN (TO_DAYS('2005-05-01')),
PARTITION P200505 VALUES LESS THAN (TO_DAYS('2005-06-01')),
PARTITION P200506 VALUES LESS THAN (TO_DAYS('2005-07-01')),
PARTITION P200507 VALUES LESS THAN (TO_DAYS('2005-08-01')),
PARTITION P200508 VALUES LESS THAN (TO_DAYS('2005-09-01')),
PARTITION P200509 VALUES LESS THAN (TO_DAYS('2005-10-01')),
PARTITION P200510 VALUES LESS THAN (TO_DAYS('2005-11-01')),
PARTITION P200511 VALUES LESS THAN (TO_DAYS('2005-12-01')),
PARTITION P200512 VALUES LESS THAN (TO_DAYS('2006-01-01')),

PARTITION P200601 VALUES LESS THAN (TO_DAYS('2006-02-01')),
PARTITION P200602 VALUES LESS THAN (TO_DAYS('2006-03-01')),
PARTITION P200603 VALUES LESS THAN (TO_DAYS('2006-04-01')),
PARTITION P200604 VALUES LESS THAN (TO_DAYS('2006-05-01')),
PARTITION P200605 VALUES LESS THAN (TO_DAYS('2006-06-01')),
PARTITION P200606 VALUES LESS THAN (TO_DAYS('2006-07-01')),
PARTITION P200607 VALUES LESS THAN (TO_DAYS('2006-08-01')),
PARTITION P200608 VALUES LESS THAN (TO_DAYS('2006-09-01')),
PARTITION P200609 VALUES LESS THAN (TO_DAYS('2006-10-01')),
PARTITION P200610 VALUES LESS THAN (TO_DAYS('2006-11-01')),
PARTITION P200611 VALUES LESS THAN (TO_DAYS('2006-12-01')),
PARTITION P200612 VALUES LESS THAN (TO_DAYS('2007-01-01')),

PARTITION P200701 VALUES LESS THAN (TO_DAYS('2007-02-01')),
PARTITION P200702 VALUES LESS THAN (TO_DAYS('2007-03-01')),
PARTITION P200703 VALUES LESS THAN (TO_DAYS('2007-04-01')),
PARTITION P200704 VALUES LESS THAN (TO_DAYS('2007-05-01')),
PARTITION P200705 VALUES LESS THAN (TO_DAYS('2007-06-01')),
PARTITION P200706 VALUES LESS THAN (TO_DAYS('2007-07-01')),
PARTITION P200707 VALUES LESS THAN (TO_DAYS('2007-08-01')),
PARTITION P200708 VALUES LESS THAN (TO_DAYS('2007-09-01')),
PARTITION P200709 VALUES LESS THAN (TO_DAYS('2007-10-01')),
PARTITION P200710 VALUES LESS THAN (TO_DAYS('2007-11-01')),
PARTITION P200711 VALUES LESS THAN (TO_DAYS('2007-12-01')),
PARTITION P200712 VALUES LESS THAN (TO_DAYS('2008-01-01'))
)
;
 